<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>内建方法 | LuaSTGPlus</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="小巧的跨平台弹幕游戏引擎">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.01a07e0b.css" as="style"><link rel="preload" href="/assets/js/app.539388da.js" as="script"><link rel="preload" href="/assets/js/2.a73f2547.js" as="script"><link rel="preload" href="/assets/js/15.99687b20.js" as="script"><link rel="preload" href="/assets/js/3.54f0b22c.js" as="script"><link rel="prefetch" href="/assets/js/10.75a9d0cc.js"><link rel="prefetch" href="/assets/js/11.a08025d8.js"><link rel="prefetch" href="/assets/js/12.2e38225c.js"><link rel="prefetch" href="/assets/js/13.cbc68ba9.js"><link rel="prefetch" href="/assets/js/14.a447a0d1.js"><link rel="prefetch" href="/assets/js/16.595cb665.js"><link rel="prefetch" href="/assets/js/17.557597d5.js"><link rel="prefetch" href="/assets/js/18.0115a993.js"><link rel="prefetch" href="/assets/js/19.fcfa8646.js"><link rel="prefetch" href="/assets/js/20.316e0bf4.js"><link rel="prefetch" href="/assets/js/21.aaae0d73.js"><link rel="prefetch" href="/assets/js/22.23ea6fe3.js"><link rel="prefetch" href="/assets/js/23.5ec74016.js"><link rel="prefetch" href="/assets/js/24.9a84410a.js"><link rel="prefetch" href="/assets/js/25.7fde6ff3.js"><link rel="prefetch" href="/assets/js/26.6e78ad17.js"><link rel="prefetch" href="/assets/js/4.054aa69d.js"><link rel="prefetch" href="/assets/js/5.b041f0d3.js"><link rel="prefetch" href="/assets/js/6.6915285b.js"><link rel="prefetch" href="/assets/js/7.9fd4998f.js"><link rel="prefetch" href="/assets/js/8.189921a2.js"><link rel="prefetch" href="/assets/js/9.48c4f8cd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.01a07e0b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="LuaSTGPlus" class="logo"> <span class="site-name can-hide">LuaSTGPlus</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="https://github.com/9chu/LuaSTGPlus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/api/LegacyAPI/BuiltinMethods.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/i18n/en/" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="https://github.com/9chu/LuaSTGPlus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/api/LegacyAPI/BuiltinMethods.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  中文
</a></li><li class="dropdown-item"><!----> <a href="/i18n/en/" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/" aria-current="page" class="sidebar-link">概述</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Legacy API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/LegacyAPI/BuiltinTypes.html" class="sidebar-link">内建类型</a></li><li><a href="/api/LegacyAPI/BuiltinMethods.html" aria-current="page" class="active sidebar-link">内建方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#数学方法" class="sidebar-link">数学方法</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#系统方法" class="sidebar-link">系统方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setwindowed" class="sidebar-link">SetWindowed</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setfps" class="sidebar-link">SetFPS</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getfps" class="sidebar-link">GetFPS</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setvsync" class="sidebar-link">SetVsync</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setresolution" class="sidebar-link">SetResolution</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#changevideomode" class="sidebar-link">ChangeVideoMode</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setsplash" class="sidebar-link">SetSplash</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#settitle" class="sidebar-link">SetTitle</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#systemlog" class="sidebar-link">SystemLog</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#print" class="sidebar-link">Print</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadpack" class="sidebar-link">LoadPack</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#unloadpack" class="sidebar-link">UnloadPack</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#extractres" class="sidebar-link">ExtractRes</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#dofile" class="sidebar-link">DoFile</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#showsplashwindow" class="sidebar-link">ShowSplashWindow</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#资产管理方法" class="sidebar-link">资产管理方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setresourcestatus" class="sidebar-link">SetResourceStatus</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#removeresource" class="sidebar-link">RemoveResource</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#checkres" class="sidebar-link">CheckRes</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#enumres" class="sidebar-link">EnumRes</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#gettexturesize" class="sidebar-link">GetTextureSize</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadtexture" class="sidebar-link">LoadTexture</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadimage" class="sidebar-link">LoadImage</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setimagestate" class="sidebar-link">SetImageState</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setimagecenter" class="sidebar-link">SetImageCenter</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setimagescale" class="sidebar-link">SetImageScale</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadanimation" class="sidebar-link">LoadAnimation</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setanimationstate" class="sidebar-link">SetAnimationState</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setanimationcenter" class="sidebar-link">SetAnimationCenter</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadps" class="sidebar-link">LoadPS</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadfont" class="sidebar-link">LoadFont</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setfontstate" class="sidebar-link">SetFontState</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setfontstate2" class="sidebar-link">SetFontState2</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadttf" class="sidebar-link">LoadTTF</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#regttf" class="sidebar-link">RegTTF</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadsound" class="sidebar-link">LoadSound</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadmusic" class="sidebar-link">LoadMusic</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#loadfx" class="sidebar-link">LoadFX</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#createrendertarget" class="sidebar-link">CreateRenderTarget</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#isrendertarget" class="sidebar-link">IsRenderTarget</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#渲染方法" class="sidebar-link">渲染方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#beginscene" class="sidebar-link">BeginScene</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#endscene" class="sidebar-link">EndScene</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#renderclear" class="sidebar-link">RenderClear</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setviewport" class="sidebar-link">SetViewport</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setortho" class="sidebar-link">SetOrtho</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setperspective" class="sidebar-link">SetPerspective</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setfog" class="sidebar-link">SetFog</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#render" class="sidebar-link">Render</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#renderrect" class="sidebar-link">RenderRect</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#render4v" class="sidebar-link">Render4V</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#rendertexture" class="sidebar-link">RenderTexture</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#rendertext" class="sidebar-link">RenderText</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#renderttf" class="sidebar-link">RenderTTF</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#pushrendertarget" class="sidebar-link">PushRenderTarget</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#poprendertarget" class="sidebar-link">PopRenderTarget</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#posteffect" class="sidebar-link">PostEffect</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#posteffectcapture" class="sidebar-link">PostEffectCapture</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#posteffectapply" class="sidebar-link">PostEffectApply</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#音频方法" class="sidebar-link">音频方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#playsound" class="sidebar-link">PlaySound</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#stopsound" class="sidebar-link">StopSound</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#pausesound" class="sidebar-link">PauseSound</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#resumesound" class="sidebar-link">ResumeSound</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getsoundstate" class="sidebar-link">GetSoundState</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#playmusic" class="sidebar-link">PlayMusic</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#stopmusic" class="sidebar-link">StopMusic</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#pausemusic" class="sidebar-link">PauseMusic</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#resumemusic" class="sidebar-link">ResumeMusic</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getmusicstate" class="sidebar-link">GetMusicState</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#updatesound" class="sidebar-link">UpdateSound</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setsevolume" class="sidebar-link">SetSEVolume</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setbgmvolume" class="sidebar-link">SetBGMVolume</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#输入" class="sidebar-link">输入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getkeystate" class="sidebar-link">GetKeyState</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getlastkey" class="sidebar-link">GetLastKey</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getlastchar" class="sidebar-link">GetLastChar</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getmouseposition" class="sidebar-link">GetMousePosition</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getmousestate" class="sidebar-link">GetMouseState</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#对象池管理方法" class="sidebar-link">对象池管理方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#objtable" class="sidebar-link">ObjTable</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getnobj" class="sidebar-link">GetnObj</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#updateobjlist" class="sidebar-link">UpdateObjList</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#objframe" class="sidebar-link">ObjFrame</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#objrender" class="sidebar-link">ObjRender</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setbound" class="sidebar-link">SetBound</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#boundcheck" class="sidebar-link">BoundCheck</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#collisioncheck" class="sidebar-link">CollisionCheck</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#updatexy" class="sidebar-link">UpdateXY</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#afterframe" class="sidebar-link">AfterFrame</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#new" class="sidebar-link">New</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#del" class="sidebar-link">Del</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#kill" class="sidebar-link">kill</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#isvalid" class="sidebar-link">IsValid</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#getv" class="sidebar-link">GetV</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setv" class="sidebar-link">SetV</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#setimgstate" class="sidebar-link">SetImgState</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#angle" class="sidebar-link">Angle</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#dist" class="sidebar-link">Dist</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#boxcheck" class="sidebar-link">BoxCheck</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#resetpool" class="sidebar-link">ResetPool</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#defaultrenderfunc" class="sidebar-link">DefaultRenderFunc</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#nextobject" class="sidebar-link">NextObject</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#objlist" class="sidebar-link">ObjList</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#particlefire" class="sidebar-link">ParticleFire</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#particlestop" class="sidebar-link">ParticleStop</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#particlegetn" class="sidebar-link">ParticleGetn</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#particlegetemission" class="sidebar-link">ParticleGetEmission</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#particlesetemission" class="sidebar-link">ParticleSetEmission</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#杂项" class="sidebar-link">杂项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#registry" class="sidebar-link">Registry</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#snapshot" class="sidebar-link">Snapshot</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#execute" class="sidebar-link">Execute</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#rand" class="sidebar-link">Rand</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#color" class="sidebar-link">Color</a></li><li class="sidebar-sub-header"><a href="/api/LegacyAPI/BuiltinMethods.html#bentlaserdata" class="sidebar-link">BentLaserData</a></li></ul></li></ul></li><li><a href="/api/LegacyAPI/BuiltinConsts.html" class="sidebar-link">内建常量</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Advanced API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/AdvancedAPI/Overview.html" class="sidebar-link">概述</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="内建方法"><a href="#内建方法" class="header-anchor">#</a> 内建方法</h1> <p>所有内建方法均位于全局<code>lstg</code>模块中。</p> <h2 id="数学方法"><a href="#数学方法" class="header-anchor">#</a> 数学方法</h2> <p>下述数学函数均以角度制为基准，含义同C语言库函数。</p> <ul><li>sin(ang)</li> <li>cos(ang)</li> <li>asin(v)</li> <li>acos(v)</li> <li>tan(ang)</li> <li>atan(v)</li> <li>atan2(y,x)</li></ul> <h2 id="系统方法"><a href="#系统方法" class="header-anchor">#</a> 系统方法</h2> <h3 id="setwindowed"><a href="#setwindowed" class="header-anchor">#</a> SetWindowed</h3> <p>设置是否窗口化。</p> <ul><li>签名：<code>SetWindowed(windowed: boolean)</code></li> <li>参数
<ul><li>windowed：设置是否窗口化（true 表示窗口化，false 表示非窗口化）</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>LuaSTGPlus 默认以窗口化模式启动。全屏模式下总是以无边框窗口模式运行。</p></div> <h3 id="setfps"><a href="#setfps" class="header-anchor">#</a> SetFPS</h3> <p>设置目标 FPS。</p> <ul><li>签名：<code>SetFPS(fps: number)</code></li> <li>参数
<ul><li>fps：目标 FPS</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>LuaSTGPlus 默认锁 60 FPS。</p></div> <h3 id="getfps"><a href="#getfps" class="header-anchor">#</a> GetFPS</h3> <p>获取实时 FPS。</p> <ul><li>签名：<code>GetFPS(): number</code></li> <li>返回值：FPS 值</li></ul> <h3 id="setvsync"><a href="#setvsync" class="header-anchor">#</a> SetVsync</h3> <p>设置是否垂直同步。</p> <ul><li>签名：<code>SetVsync(vsync: boolean)</code></li> <li>参数
<ul><li>vsync：是否垂直同步</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>LuaSTGPlus 默认不开启垂直同步。</p></div> <h3 id="setresolution"><a href="#setresolution" class="header-anchor">#</a> SetResolution</h3> <p>设置分辨率。</p> <p>从<code>v2</code>开始，<code>SetResolution</code>将用于设置期望的分辨率。当平台支持改变窗口大小时，窗口大小会设置成该分辨率大小；当平台不支持改变窗口大小或窗口位于全屏模式且分辨率不等于期望大小时，LuaSTGPlus 会自动调整渲染视口来适配期望的长宽比。</p> <ul><li>签名：<code>SetResolution(width: number, height: number)</code></li> <li>参数
<ul><li>width：宽度</li> <li>height：高度</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>LuaSTGPlus 默认分辨率为 640x480。</p></div> <h3 id="changevideomode"><a href="#changevideomode" class="header-anchor">#</a> ChangeVideoMode</h3> <p>改变视频选项。</p> <p>从<code>v2</code>开始，该方法等价于<code>SetResolution</code>、<code>SetWindowed</code>和<code>SetVsync</code>的组合。</p> <ul><li>签名：<code>ChangeVideoMode(width: number, height: number, windowed: boolean, vsync: boolean): boolean</code></li> <li>参数
<ul><li>width：宽度</li> <li>height：高度</li> <li>windowed：是否窗口模式</li> <li>vsync：是否垂直同步</li></ul></li> <li>返回值：是否成功</li></ul> <h3 id="setsplash"><a href="#setsplash" class="header-anchor">#</a> SetSplash</h3> <p>设置是否显示光标。</p> <ul><li>签名：<code>SetSplash(value: boolean)</code></li> <li>参数
<ul><li>value：是否显示</li></ul></li></ul> <h3 id="settitle"><a href="#settitle" class="header-anchor">#</a> SetTitle</h3> <p>设置窗口标题。</p> <ul><li>签名：<code>SetTitle(value: string)</code></li> <li>参数
<ul><li>value：窗口标题</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>默认窗口标题为“LuaSTGPlus”。</p></div> <h3 id="systemlog"><a href="#systemlog" class="header-anchor">#</a> SystemLog</h3> <p>写出日志。</p> <ul><li>签名：<code>SystemLog(what: string)</code></li> <li>参数
<ul><li>what：需要写出的内容</li></ul></li></ul> <h3 id="print"><a href="#print" class="header-anchor">#</a> Print</h3> <p>将若干值写出日志。</p> <ul><li>签名：<code>Print(...)</code></li> <li>参数
<ul><li>...：可变参，将会施加 tostring 操作后写出日志</li></ul></li></ul> <h3 id="loadpack"><a href="#loadpack" class="header-anchor">#</a> LoadPack</h3> <p>加载指定位置的 Zip 资源包，可选填密码。</p> <ul><li>签名：<code>LoadPack(path: string, password?: string)</code></li> <li>参数
<ul><li>path：文件路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li> <li>password：可选密码</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>后加载的资源包有较高的查找优先级。这意味着可以通过该机制加载资源包来覆盖基础资源包中的文件，用于打补丁等场景。</p> <p>详见<a href="/guide/Subsystem/VfsSystem.html">文件子系统</a>章节。</p></div> <h3 id="unloadpack"><a href="#unloadpack" class="header-anchor">#</a> UnloadPack</h3> <p>卸载指定位置的资源包，要求路径名必须一致。</p> <ul><li>签名：<code>UnloadPack(path: string)</code></li> <li>参数
<ul><li>path：文件路径</li></ul></li></ul> <h3 id="extractres"><a href="#extractres" class="header-anchor">#</a> ExtractRes <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>将资源包中的数据解压到本地。</p> <ul><li>签名：<code>ExtractRes(path: string, target: string)</code></li> <li>参数
<ul><li>path：资源包路径</li> <li>target：解压目的地</li></ul></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="dofile"><a href="#dofile" class="header-anchor">#</a> DoFile</h3> <p>执行指定路径的脚本。</p> <p>方法会采取相对调用者路径的搜索规则加载脚本，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a>。</p> <ul><li>签名：<code>DoFile(path: string)</code></li> <li>参数
<ul><li>path：脚本路径</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>已执行过的脚本会再次执行。</p> <p>推荐使用<code>import</code>/<code>require</code>机制代替该方法。</p></div> <h3 id="showsplashwindow"><a href="#showsplashwindow" class="header-anchor">#</a> ShowSplashWindow <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>显示载入 LOGO 窗口。</p> <ul><li>签名：<code>ShowSplashWindow(path?: string)</code></li> <li>参数
<ul><li>path：LOGO 图片路径，当不设置时，使用内置图片显示载入窗口。</li></ul></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h2 id="资产管理方法"><a href="#资产管理方法" class="header-anchor">#</a> 资产管理方法</h2> <p>详见<a href="/guide/Subsystem/AssetSystem.html">资产子系统</a>。</p> <h3 id="setresourcestatus"><a href="#setresourcestatus" class="header-anchor">#</a> SetResourceStatus</h3> <p>设置当前活动的资产池。</p> <p>活动资产池将会影响资产被加载到哪里。</p> <ul><li>签名：<code>SetResourceStatus(pool: string)</code></li> <li>参数
<ul><li>pool：资产池名称，可选<code>global</code>、<code>stage</code>、<code>none</code>。当设置<code>global</code>时，资产会被加载到<strong>全局资产池</strong>；当设置<code>stage</code>时，资产会被加载到<strong>关卡资产池</strong>；当设置<code>none</code>时，将会禁用加载过程</li></ul></li></ul> <h3 id="removeresource"><a href="#removeresource" class="header-anchor">#</a> RemoveResource</h3> <p>删除所有资产或某一资产。</p> <p>若仅指定资产池，将删除该资产池中所有资产。</p> <p>否则，删除指定类型的某一资产。</p> <p>若资产仍在使用，则需等到相关使用方释放资产才会最终删除资产对象。</p> <ul><li>签名：<code>RemoveResource(pool: string, type?: number, name?: string)</code></li> <li>参数
<ul><li>pool：资产池名称，可选<code>global</code>、<code>stage</code>、<code>none</code>（设置为<code>none</code>不会有任何效果）</li> <li>type：资产类型，详见<a href="/guide/Subsystem/AssetSystem.html#资产类型">资产类型</a></li> <li>name：资产名，当指定<code>type</code>时，必须填写该参数</li></ul></li></ul> <h3 id="checkres"><a href="#checkres" class="header-anchor">#</a> CheckRes</h3> <p>检查某一资产位于哪个资产池。</p> <p>从 LuaSTGPlus v2 起，检查会先经过关卡资产池，如果不存在，再在全局资产池中查找。</p> <ul><li>签名：<code>CheckRes(type: number, name: string): string?</code></li> <li>参数
<ul><li>type：资产类型，详见<a href="/guide/Subsystem/AssetSystem.html#资产类型">资产类型</a></li> <li>name：资产名</li></ul></li> <li>返回值
<ul><li>资产池名称，取值<code>global</code>、<code>stage</code>。若资产不存在，返回<code>nil</code></li></ul></li></ul> <h3 id="enumres"><a href="#enumres" class="header-anchor">#</a> EnumRes</h3> <p>枚举资产池中某种类型的资产。</p> <p>依次返回<strong>全局资产池</strong>和<strong>关卡资产池</strong>中所有该类型的资产的名称。</p> <ul><li>签名：<code>EnumRes(type: number): [table, table]</code></li> <li>参数
<ul><li>type：资产类型，详见<a href="/guide/Subsystem/AssetSystem.html#资产类型">资产类型</a></li></ul></li> <li>返回值
<ul><li>全局资产池和关卡资产池中的资产名称</li></ul></li></ul> <h3 id="gettexturesize"><a href="#gettexturesize" class="header-anchor">#</a> GetTextureSize</h3> <p>获取纹理资产的大小。</p> <p>注意该值经过 PPU 缩放，非实际大小。</p> <ul><li>签名：<code>GetTextureSize(name: string): [number, number]</code></li> <li>参数
<ul><li>name：纹理名称</li></ul></li> <li>返回值
<ul><li>纹理的宽度和高度</li></ul></li></ul> <h3 id="loadtexture"><a href="#loadtexture" class="header-anchor">#</a> LoadTexture</h3> <p>加载纹理资产。</p> <ul><li>签名：<code>LoadTexture(name: string, path: string, mipmap?: boolean)</code></li> <li>参数
<ul><li>name：资产名</li> <li>path：纹理路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li> <li>mipmap：是否创建纹理链，默认取值<code>true</code></li></ul></li></ul> <h3 id="loadimage"><a href="#loadimage" class="header-anchor">#</a> LoadImage</h3> <p>加载精灵资产。</p> <ul><li>签名：<code>LoadImage(name: string, textureName: string, x: number, y: number, w: number, h: number, a?: number, b?: number, rect?: boolean)</code></li> <li>参数
<ul><li>name：资产名</li> <li>textureName：引用的纹理资产名</li> <li>x：指定在纹理中（经过 PPU 缩放的）精灵左上角的横坐标（正方向向右）</li> <li>y：指定在纹理中（经过 PPU 缩放的）精灵左上角的纵坐标（正方向向下）</li> <li>w：指定在纹理中（经过 PPU 缩放的）精灵的宽度</li> <li>h：指定在纹理中（经过 PPU 缩放的）精灵的高度</li> <li>a：碰撞盒的横向半长</li> <li>b：碰撞盒的纵向半长</li> <li>rect：是否为矩形碰撞盒</li></ul></li></ul> <h3 id="setimagestate"><a href="#setimagestate" class="header-anchor">#</a> SetImageState</h3> <p>设置精灵混合状态。</p> <ul><li>签名：<code>SetImageState(name: string, blend: string, vertexColor1?: LSTGColor, vertexColor2?: LSTGColor, vertexColor3?: LSTGColor, vertexColor4?: LSTGColor)</code></li> <li>参数
<ul><li>name：资产名</li> <li>blend：混合模式，详见<a href="/guide/Subsystem/RenderSystem.html#混合选项">混合选项</a></li> <li>vertexColor1：精灵左上角顶点色，当仅设置<code>vertexColor1</code>时，将会用于设置所有顶点的颜色</li> <li>vertexColor2：精灵右上角顶点色</li> <li>vertexColor3：精灵右下角顶点色</li> <li>vertexColor4：精灵左下角顶点色</li></ul></li></ul> <h3 id="setimagecenter"><a href="#setimagecenter" class="header-anchor">#</a> SetImageCenter</h3> <p>设置精灵的锚点。</p> <ul><li>签名：<code>SetImageCenter(name: string, x: number, y: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>x：相对于精灵左上角的横坐标</li> <li>y：相对于精灵左上角的纵坐标</li></ul></li></ul> <h3 id="setimagescale"><a href="#setimagescale" class="header-anchor">#</a> SetImageScale <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>设置全局图像缩放系数。</p> <p>该方法将在渲染精灵等对象时，在<code>scale</code>参数上增加一个系数。</p> <p>由于该方法可能会造成混乱，我们决定在新版中移除该方法。</p> <ul><li>签名：<code>SetImageScale(factor: number)</code></li> <li>参数
<ul><li>factor：缩放系数</li></ul></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="loadanimation"><a href="#loadanimation" class="header-anchor">#</a> LoadAnimation</h3> <p>加载动画序列。</p> <ul><li>签名：<code>LoadAnimation(name: string, textureName: string, x: number, y: number. w: number, h: number, n: number, m: number, interval: number, a?: number, b?: number, rect?: boolean)</code></li> <li>参数
<ul><li>name：资产名</li> <li>textureName：依赖的纹理资产名</li> <li>x：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li> <li>y：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li> <li>w：指定一帧的宽度</li> <li>h：指定一帧的高度</li> <li>n：指定纵向分割数，列优先排列动画帧</li> <li>m：指定横向分割数</li> <li>interval：播放间隔（帧）</li> <li>a：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li> <li>b：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li> <li>rect：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li></ul></li></ul> <h3 id="setanimationstate"><a href="#setanimationstate" class="header-anchor">#</a> SetAnimationState</h3> <p>同<a href="/api/LegacyAPI/BuiltinMethods.html#setimagestate">SetImageState</a>。</p> <ul><li>签名：<code>SetAnimationState(name: string, blend: string, vertexColor1?: LSTGColor, vertexColor2?: LSTGColor, vertexColor3?: LSTGColor, vertexColor4?: LSTGColor)</code></li> <li>参数
<ul><li>name：资产名</li> <li>blend：混合模式，详见<a href="/guide/Subsystem/RenderSystem.html#混合选项">混合选项</a></li> <li>vertexColor1：动画序列左上角顶点色，当仅设置<code>vertexColor1</code>时，将会用于设置所有顶点的颜色</li> <li>vertexColor2：动画序列右上角顶点色</li> <li>vertexColor3：动画序列右下角顶点色</li> <li>vertexColor4：动画序列左下角顶点色</li></ul></li></ul> <h3 id="setanimationcenter"><a href="#setanimationcenter" class="header-anchor">#</a> SetAnimationCenter</h3> <p>同<a href="/api/LegacyAPI/BuiltinMethods.html#setimagecenter">SetImageCenter</a>。</p> <ul><li>签名：<code>SetImageCenter(name: string, x: number, y: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>x：相对于动画序列左上角的横坐标</li> <li>y：相对于动画序列左上角的纵坐标</li></ul></li></ul> <h3 id="loadps"><a href="#loadps" class="header-anchor">#</a> LoadPS</h3> <p>加载粒子效果。</p> <ul><li>签名：<code>LoadPS(name: string, path: string, imgName: string, a?: number, b?: number, rect?: boolean)</code></li> <li>参数
<ul><li>name：资产名</li> <li>path：定义文件路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li> <li>imgName：绑定的粒子精灵</li> <li>a：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li> <li>b：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li> <li>rect：同<a href="/api/LegacyAPI/BuiltinMethods.html#loadimage">LoadImage</a></li></ul></li></ul> <h3 id="loadfont"><a href="#loadfont" class="header-anchor">#</a> LoadFont</h3> <p>加载纹理化字体。</p> <ul><li>签名：<code>LoadFont(name: string, path: string, mipmap?: boolean)</code></li> <li>参数
<ul><li>name：资产名</li> <li>path：定义文件路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li> <li>mipmap：是否创建 mipmap，默认为<code>true</code></li></ul></li></ul> <h3 id="setfontstate"><a href="#setfontstate" class="header-anchor">#</a> SetFontState</h3> <p>设置纹理化字体的混合模式。</p> <ul><li>签名：<code>SetFontState(name: string, blend: string, color?: LSTGColor)</code></li> <li>参数
<ul><li>name：资产名</li> <li>blend：混合模式，详见<a href="/guide/Subsystem/RenderSystem.html#混合选项">混合选项</a></li> <li>color：纹理化字体的顶点色</li></ul></li></ul> <h3 id="setfontstate2"><a href="#setfontstate2" class="header-anchor">#</a> SetFontState2 <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>设置 HGE 纹理化字体的参数。</p> <p>LuaSTGPlus 不支持该方法。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="loadttf"><a href="#loadttf" class="header-anchor">#</a> LoadTTF</h3> <p>加载 TTF 字体。</p> <ul><li>签名：<code>LoadTTF(name: string, path: string, width: number, height?: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>path：字体路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li> <li>width：字体宽度</li> <li>height：字体高度（废弃）</li></ul></li></ul> <h3 id="regttf"><a href="#regttf" class="header-anchor">#</a> RegTTF <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>向系统注册 TTF 字体。</p> <p>LuaSTGPlus 不支持该方法。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="loadsound"><a href="#loadsound" class="header-anchor">#</a> LoadSound</h3> <p>加载<a href="/guide/Subsystem/AssetSystem.html#音效">音效</a>。</p> <ul><li>签名：<code>LoadSound(name: string, path: string)</code></li> <li>参数
<ul><li>name：资产名</li> <li>path：音效路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li></ul></li></ul> <h3 id="loadmusic"><a href="#loadmusic" class="header-anchor">#</a> LoadMusic</h3> <p>加载<a href="/guide/Subsystem/AssetSystem.html#背景音乐">背景音乐</a>。</p> <ul><li>签名：<code>LoadMusic(name: string, path: string, end: number, loop: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>path：背景音乐路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li> <li>end：循环节结尾相对乐曲开始的时间（秒）</li> <li>loop：循环节长度（秒）</li></ul></li></ul> <h3 id="loadfx"><a href="#loadfx" class="header-anchor">#</a> LoadFX</h3> <p>装载 Shader 效果文件。</p> <ul><li>签名：<code>LoadFX(name: string, path: string)</code></li> <li>参数
<ul><li>name：资产名</li> <li>path：文件路径，请参考<a href="/guide/Subsystem/AssetSystem.html#资产加载规则">资产加载规则</a></li></ul></li></ul> <h3 id="createrendertarget"><a href="#createrendertarget" class="header-anchor">#</a> CreateRenderTarget</h3> <p>创建 RenderTarget。</p> <ul><li>签名：<code>CreateRenderTarget(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="isrendertarget"><a href="#isrendertarget" class="header-anchor">#</a> IsRenderTarget</h3> <p>检查纹理是否为 RenderTarget。</p> <ul><li>签名：<code>IsRenderTarget(name: string): boolean</code></li> <li>参数
<ul><li>name：纹理资产名</li></ul></li> <li>返回值：纹理资产是否为 RT</li></ul> <h2 id="渲染方法"><a href="#渲染方法" class="header-anchor">#</a> 渲染方法</h2> <p>渲染方法均需要在<code>RenderFunc</code>中调用。</p> <p>详见<a href="/guide/Subsystem/RenderSystem.html">渲染子系统</a>。</p> <h3 id="beginscene"><a href="#beginscene" class="header-anchor">#</a> BeginScene <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>通知渲染开始。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="endscene"><a href="#endscene" class="header-anchor">#</a> EndScene <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>通知渲染结束。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="renderclear"><a href="#renderclear" class="header-anchor">#</a> RenderClear</h3> <p>使用指定颜色清空屏幕。</p> <p>同时会清除深度缓冲区。</p> <ul><li>签名：<code>RenderClear(color: LSTGColor)</code></li> <li>参数
<ul><li>color：清空用颜色</li></ul></li></ul> <h3 id="setviewport"><a href="#setviewport" class="header-anchor">#</a> SetViewport</h3> <p>设置视口，将影响裁剪和渲染。</p> <ul><li>签名：<code>SetViewport(left: number, right: number, bottom: number, top: number)</code></li> <li>参数
<ul><li>left：左侧位置（相对于设计分辨率）</li> <li>right：右侧位置（相对于设计分辨率）</li> <li>bottom：底部位置（相对于设计分辨率）</li> <li>top：顶部位置（相对于设计分辨率）</li></ul></li></ul> <h3 id="setortho"><a href="#setortho" class="header-anchor">#</a> SetOrtho</h3> <p>设置正投影矩阵。最终 Z 轴被限制在[0, 1]区间内。</p> <ul><li>签名：<code>SetOrtho(left: number, right: number, bottom: number, top: number)</code></li> <li>参数
<ul><li>left：表示X轴最小值</li> <li>right：表示X轴最大值</li> <li>bottom：表示Y轴最小值</li> <li>top：表示Y轴最大值</li></ul></li></ul> <h3 id="setperspective"><a href="#setperspective" class="header-anchor">#</a> SetPerspective</h3> <p>设置透视投影矩阵和观察矩阵。</p> <ul><li>签名：<code>SetPerspective(eyeX: number, eyeY: number, eyeZ: number, atX: number, atY: number, atZ: number, upX: number, upY: number, upZ: number, fovy: number, aspect: number, zn: number, zf: number)</code></li> <li>参数
<ul><li>eyeX：观察者 X 坐标</li> <li>eyeY：观察者 Y 坐标</li> <li>eyeZ：观察者 Z 坐标</li> <li>atX：观察目标 X 坐标</li> <li>atY：观察目标 Y 坐标</li> <li>atZ：观察目标 Z 坐标</li> <li>upX：上方向向量 X 坐标</li> <li>upY：上方向向量 Y 坐标</li> <li>upZ：上方向向量 Z 坐标</li> <li>fovy：视角范围（弧度制）</li> <li>aspect：宽高比</li> <li>zn：Z 轴近裁剪面距离</li> <li>zf：Z 轴远裁剪面距离</li></ul></li></ul> <h3 id="setfog"><a href="#setfog" class="header-anchor">#</a> SetFog</h3> <p>设置雾效果。</p> <p>当参数为空，将关闭雾效果。</p> <p>当参数1为<code>-1</code>，采用<code>Exp</code>公式，此时<code>far</code>设置为系数，<code>color</code>设置为颜色。</p> <p>当参数1为<code>-2</code>，采用<code>Exp2</code>公式，此时<code>far</code>设置为系数，<code>color</code>设置为颜色。</p> <p>否则，采用<code>Linear</code>公式，此时起止设置为<code>near</code>和<code>far</code>，<code>color</code>设置为颜色。</p> <ul><li>签名：<code>SetFog(near?: number, far?: number, color?: LSTGColor)</code></li> <li>参数
<ul><li>near：参数1，参见上述说明</li> <li>far：参数2，参见上述说明</li> <li>color：雾颜色，默认为<code>0x00FFFFFF</code></li></ul></li></ul> <h3 id="render"><a href="#render" class="header-anchor">#</a> Render</h3> <p>渲染精灵。</p> <ul><li>签名：<code>Render(imageName: string, x: number, y: number, rot?: number, hscale?: number, vscale?: number, z?: number)</code></li> <li>参数
<ul><li>imageName：精灵资产名</li> <li>x：中心点 X 坐标</li> <li>y：中心点 Y 坐标</li> <li>rot：旋转（弧度制），默认为0</li> <li>hscale：X 轴缩放量，默认为1</li> <li>vscale：Y 轴缩放量，默认为1，若指定了 hscale 但是没有指定 vscale，则 vscale = hscale</li> <li>z：Z 坐标，默认为0.5</li></ul></li></ul> <h3 id="renderrect"><a href="#renderrect" class="header-anchor">#</a> RenderRect</h3> <p>在一个矩形范围内渲染图像（z = 0.5）。</p> <ul><li>签名：<code>RenderRect(imageName: string, left: number, right: number, bottom: number, top: number)</code></li> <li>参数
<ul><li>imageName：精灵资产名</li> <li>left：左侧坐标值</li> <li>right：右侧坐标值</li> <li>bottom：底边坐标值</li> <li>top：顶边坐标值</li></ul></li></ul> <h3 id="render4v"><a href="#render4v" class="header-anchor">#</a> Render4V</h3> <p>给出四个顶点渲染图像（z = 0.5）。</p> <ul><li>签名：<code>Render4V(imageName: string, x1: number, y1: number, z1:number, x2: number, y2: number, z2: number, x3: number, y3: number, z3: number, x4: number, y4: number, z4: number)</code></li> <li>参数
<ul><li>imageName：精灵资产名</li> <li>x1：左上角坐标 X 值</li> <li>y1：左上角坐标 Y 值</li> <li>z1：左上角坐标 Z 值</li> <li>x2：右上角坐标 X 值</li> <li>y2：右上角坐标 Y 值</li> <li>z2：右上角坐标 Z 值</li> <li>x3：右下角坐标 X 值</li> <li>y3：右下角坐标 Y 值</li> <li>z3：右下角坐标 Z 值</li> <li>x4：左下角坐标 X 值</li> <li>y4：左下角坐标 Y 值</li> <li>z4：左下角坐标 Z 值</li></ul></li></ul> <h3 id="rendertexture"><a href="#rendertexture" class="header-anchor">#</a> RenderTexture</h3> <p>直接渲染纹理。</p> <p>顶点需要满足下述定义：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> X坐标<span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Y坐标<span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> Z坐标<span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> U坐标（受PPU影响）<span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> V坐标（受PPU影响）<span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> 顶点颜色<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>签名：<code>RenderTexture(textureName: string, blend: string, vertex1: table, vertex2: table, vertex3: table, vertex4: table)</code></li> <li>参数
<ul><li>textureName：纹理资产名</li> <li>blend：混合模式，详见<a href="/guide/Subsystem/RenderSystem.html#混合选项">混合选项</a></li> <li>vertex1：左上角顶点</li> <li>vertex2：右上角顶点</li> <li>vertex3：右下角顶点</li> <li>vertex4：左下角顶点</li></ul></li></ul> <h3 id="rendertext"><a href="#rendertext" class="header-anchor">#</a> RenderText</h3> <p>使用纹理化字体渲染一段文字。</p> <p>默认字体采取 0.5 倍行距。</p> <p>对齐方式可取：</p> <table><thead><tr><th>对齐方式</th> <th>值</th> <th>对齐方式</th> <th>值</th> <th>对齐方式</th> <th>值</th></tr></thead> <tbody><tr><td>左上</td> <td>0</td> <td>中上</td> <td>1</td> <td>右上</td> <td>2</td></tr> <tr><td>左中</td> <td>4</td> <td>中中</td> <td>5</td> <td>右中</td> <td>6</td></tr> <tr><td>左下</td> <td>8</td> <td>中下</td> <td>9</td> <td>右下</td> <td>10</td></tr></tbody></table> <ul><li>签名：<code>RenderText(name: string, text: string, x: number, y: number, scale?: number, align?: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>text：文字</li> <li>x：左侧坐标值</li> <li>y：顶边坐标值</li> <li>scale：缩放，默认取 1</li> <li>align：对齐方式，默认取 5</li></ul></li></ul> <h3 id="renderttf"><a href="#renderttf" class="header-anchor">#</a> RenderTTF</h3> <p>渲染 TTF 字体。</p> <p>格式可取：</p> <table><thead><tr><th>说明</th> <th>值</th> <th>说明</th> <th>值</th></tr></thead> <tbody><tr><td>顶对齐</td> <td>0</td> <td>左对齐</td> <td>0</td></tr> <tr><td>垂直居中</td> <td>4</td> <td>居中</td> <td>1</td></tr> <tr><td>底对齐</td> <td>8</td> <td>右对齐</td> <td>2</td></tr> <tr><td>断字</td> <td>16</td> <td></td> <td></td></tr></tbody></table> <ul><li>签名：<code>RenderTTF(name: string, text: string, left: number, right: number, bottom: number, top: number, fmt: number, blend: LSTGColor, scale?: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>text：文字</li> <li>left：渲染范围左边坐标值</li> <li>right：渲染范围右边坐标值</li> <li>bottom：渲染范围底边坐标值</li> <li>top：渲染范围顶边坐标值</li> <li>fmt：格式</li> <li>blend：混合颜色</li> <li>scale：缩放，默认取 1</li></ul></li></ul> <h3 id="pushrendertarget"><a href="#pushrendertarget" class="header-anchor">#</a> PushRenderTarget</h3> <p>将一个 RenderTarget 作为屏幕缓冲区，并推入栈。</p> <ul><li>签名：<code>PushRenderTarget(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="poprendertarget"><a href="#poprendertarget" class="header-anchor">#</a> PopRenderTarget</h3> <p>将当前使用的 RenderTarget 从栈中移除，并切换到上一个 RenderTarget。</p> <ul><li>签名：<code>PopRenderTarget()</code></li></ul> <h3 id="posteffect"><a href="#posteffect" class="header-anchor">#</a> PostEffect</h3> <p>施加后处理效果。</p> <p>参数列表可以满足如下格式：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">args</span> <span class="token operator">=</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> LSTGColor<span class="token operator">&gt;</span>
</code></pre></div><p>当传递<code>string</code>类型时，将会应用对应名称的纹理资源到 Sampler 上。
当传递<code>number</code>类型时，将会设置到对应的 Uniform 上。
当传递<code>LSTGColor</code>类型时，会转换到 uint32_t 并设置到对应的 Uniform 上。</p> <ul><li>签名：<code>PostEffect(name: string, fx: string, blend: string, args?: table)</code></li> <li>参数
<ul><li>name：纹理资产名</li> <li>fx：FX 资产名</li> <li>blend：混合模式，详见<a href="/guide/Subsystem/RenderSystem.html#混合选项">混合选项</a>，仅使用颜色混合分量</li> <li>args：传递给 FX 的参数</li></ul></li></ul> <h3 id="posteffectcapture"><a href="#posteffectcapture" class="header-anchor">#</a> PostEffectCapture</h3> <p>开始捕获绘制数据。</p> <p>从这一步开始，所有后续渲染操作都将在PostEffect缓冲区中进行。</p> <p>这一操作等价于<code>PushRenderTarget(InternalPostEffectBuffer)</code>。</p> <ul><li>签名：<code>PostEffectCapture()</code></li></ul> <h3 id="posteffectapply"><a href="#posteffectapply" class="header-anchor">#</a> PostEffectApply</h3> <p>结束屏幕捕获并应用PostEffect。</p> <p>这一操作等价于：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">PopRenderTarget</span><span class="token punctuation">(</span>InternalPostEffectBuffer<span class="token punctuation">)</span>
<span class="token function">PostEffect</span><span class="token punctuation">(</span>InternalPostEffectBuffer<span class="token punctuation">,</span> fx_name<span class="token punctuation">,</span> blend<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
</code></pre></div><p>由于需要配对<code>InternalPostEffectBuffer</code>，因此RenderTarget栈顶必须为<code>InternalPostEffectBuffer</code>。</p> <p>换言之，代码必须满足：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">PostEffectCapture</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>
<span class="token punctuation">...</span>  <span class="token comment">-- 配对的Push/PopRenderTarget操作</span>
<span class="token function">PostEffectApply</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>签名：<code>PostEffectApply(fx: string, blend: string, args?: table)</code></li> <li>参数
<ul><li>fx：FX 资产名</li> <li>blend：混合模式</li> <li>args：参数列表</li></ul></li></ul> <h2 id="音频方法"><a href="#音频方法" class="header-anchor">#</a> 音频方法</h2> <p>详见<a href="/guide/Subsystem/AudioSystem.html">音频子系统</a>。</p> <h3 id="playsound"><a href="#playsound" class="header-anchor">#</a> PlaySound</h3> <p>播放音效。</p> <p>如果一个音效正在播放，则会打断过程从头重新开始播放。</p> <ul><li>签名：<code>PlaySound(name: string, vol: number, pan?: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>vol：音量，取值范围[0, 1]</li> <li>pan：平衡（默认为0），取值范围[-1, 1]</li></ul></li></ul> <h3 id="stopsound"><a href="#stopsound" class="header-anchor">#</a> StopSound</h3> <p>停止播放音效。</p> <ul><li>签名：<code>StopSound(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="pausesound"><a href="#pausesound" class="header-anchor">#</a> PauseSound</h3> <p>暂停播放音效。</p> <ul><li>签名：<code>PauseSound(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="resumesound"><a href="#resumesound" class="header-anchor">#</a> ResumeSound</h3> <p>继续播放音效。</p> <ul><li>签名：<code>ResumeSound(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="getsoundstate"><a href="#getsoundstate" class="header-anchor">#</a> GetSoundState</h3> <p>获取音效播放状态。</p> <ul><li>签名：<code>GetSoundState(name: string): string</code></li> <li>参数
<ul><li>name：资产名</li></ul></li> <li>返回值：音效播放状态，可取<code>paused</code>、<code>playing</code>、<code>stopped</code></li></ul> <h3 id="playmusic"><a href="#playmusic" class="header-anchor">#</a> PlayMusic</h3> <p>播放背景音乐。</p> <ul><li>签名：<code>PlayMusic(name: string, vol?: number, position?: number)</code></li> <li>参数
<ul><li>name：资产名</li> <li>vol：音量，默认为 1</li> <li>position：播放起始位置（秒），默认为 0</li></ul></li></ul> <h3 id="stopmusic"><a href="#stopmusic" class="header-anchor">#</a> StopMusic</h3> <p>停止播放音乐。</p> <ul><li>签名：<code>StopMusic(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="pausemusic"><a href="#pausemusic" class="header-anchor">#</a> PauseMusic</h3> <p>暂停播放音乐。</p> <ul><li>签名：<code>PauseMusic(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="resumemusic"><a href="#resumemusic" class="header-anchor">#</a> ResumeMusic</h3> <p>继续播放音乐。</p> <ul><li>签名：<code>ResumeMusic(name: string)</code></li> <li>参数
<ul><li>name：资产名</li></ul></li></ul> <h3 id="getmusicstate"><a href="#getmusicstate" class="header-anchor">#</a> GetMusicState</h3> <p>获取音乐播放状态。</p> <ul><li>签名：<code>GetMusicState(name: string): string</code></li> <li>参数
<ul><li>name：资产名</li></ul></li> <li>返回值：音乐播放状态，可取<code>paused</code>、<code>playing</code>、<code>stopped</code></li></ul> <h3 id="updatesound"><a href="#updatesound" class="header-anchor">#</a> UpdateSound <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>更新音频系统状态。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="setsevolume"><a href="#setsevolume" class="header-anchor">#</a> SetSEVolume</h3> <p>设置音效整体的音量。</p> <ul><li>签名：<code>SetSEVolume(vol: number)</code></li> <li>参数
<ul><li>vol：音量，取值[0, 1]</li></ul></li></ul> <h3 id="setbgmvolume"><a href="#setbgmvolume" class="header-anchor">#</a> SetBGMVolume</h3> <p>当只有一个参数时，用于设置背景音乐整体的音量。</p> <p>若有两个参数时，设置指定音乐的播放音量。</p> <ul><li>签名：<code>SetBGMVolume(arg: number|string, vol?: number)</code></li> <li>参数
<ul><li>arg：指定全局背景音乐音量大小或者指定资产名</li> <li>vol：音量，取值[0, 1]</li></ul></li></ul> <h2 id="输入"><a href="#输入" class="header-anchor">#</a> 输入</h2> <h3 id="getkeystate"><a href="#getkeystate" class="header-anchor">#</a> GetKeyState</h3> <p>检查按键是否按下。</p> <ul><li>签名：<code>GetKeyState(vkCode: number): boolean</code></li> <li>参数
<ul><li>vkCode：键扫描代码，采用微软定义的虚拟键代码</li></ul></li></ul> <h3 id="getlastkey"><a href="#getlastkey" class="header-anchor">#</a> GetLastKey</h3> <p>返回最后一次输入的按键的扫描代码。</p> <ul><li>签名：<code>GetLastKey(): number</code></li> <li>返回值：虚拟键代码</li></ul> <h3 id="getlastchar"><a href="#getlastchar" class="header-anchor">#</a> GetLastChar</h3> <p>返回最后一次输入的字符。</p> <ul><li>签名：<code>GetLastChar(): string</code></li> <li>返回值：字符</li></ul> <h3 id="getmouseposition"><a href="#getmouseposition" class="header-anchor">#</a> GetMousePosition</h3> <p>获取鼠标的位置，以窗口左下角为原点。</p> <ul><li>签名：<code>GetMousePosition(): [number, number]</code></li> <li>返回值：鼠标位置（X, Y）</li></ul> <h3 id="getmousestate"><a href="#getmousestate" class="header-anchor">#</a> GetMouseState</h3> <p>检查鼠标按键是否按下。</p> <ul><li>签名：<code>GetMouseState(button: number): boolean</code></li> <li>参数
<ul><li>button：可取值0,1,2，表示鼠标左键、中键和右键</li></ul></li></ul> <h2 id="对象池管理方法"><a href="#对象池管理方法" class="header-anchor">#</a> 对象池管理方法</h2> <h3 id="objtable"><a href="#objtable" class="header-anchor">#</a> ObjTable <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>该方法可以获得对象池所在的 table。</p> <ul><li>签名：<code>ObjTable(): table</code></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="getnobj"><a href="#getnobj" class="header-anchor">#</a> GetnObj</h3> <p>获取对象池中对象个数。</p> <ul><li>签名：<code>GetnObj(): number</code></li> <li>返回值：对象个数</li></ul> <h3 id="updateobjlist"><a href="#updateobjlist" class="header-anchor">#</a> UpdateObjList <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>更新对象池。此时将所有对象排序并归类。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="objframe"><a href="#objframe" class="header-anchor">#</a> ObjFrame</h3> <p>更新对象列表中所有对象，并更新属性。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>禁止在协程上调用该方法。</p></div> <ul><li>签名：<code>ObjFrame()</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>按照下列顺序更新这些属性：</p> <ul><li>vx += ax</li> <li>vy += ay</li> <li>x += vx</li> <li>y += vy</li> <li>rot += omiga</li> <li>更新绑定的粒子效果（若有）</li></ul></div> <h3 id="objrender"><a href="#objrender" class="header-anchor">#</a> ObjRender</h3> <p>渲染所有对象。</p> <p>对象会按照<code>layer</code>进行排序，<code>layer</code>越小越先渲染。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>禁止在协程上调用该方法。</p></div> <ul><li>签名：<code>ObjRender()</code></li></ul> <h3 id="setbound"><a href="#setbound" class="header-anchor">#</a> SetBound</h3> <p>设置场景边界。</p> <p>当对象设置越界销毁时，超过场景边界的对象会被自动删除。</p> <ul><li>签名：<code>SetBound(left:number, right:number, bottom:number, top:number)</code></li> <li>参数
<ul><li>left：左边坐标值</li> <li>right：右边坐标值</li> <li>bottom：底边坐标值</li> <li>top：顶边坐标值</li></ul></li></ul> <h3 id="boundcheck"><a href="#boundcheck" class="header-anchor">#</a> BoundCheck</h3> <p>执行边界检查。</p> <p>注意<code>BoundCheck</code>只保证对象中心还在范围内，不进行碰撞盒检查。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>禁止在协程上调用该方法。</p></div> <ul><li>签名：<code>BoundCheck()</code></li></ul> <h3 id="collisioncheck"><a href="#collisioncheck" class="header-anchor">#</a> CollisionCheck</h3> <p>对组 A 和 B 进行碰撞检测。</p> <p>如果组 A 中对象与组 B 中对象发生碰撞，将执行 A 中对象的碰撞回调函数。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>禁止在协程上调用该方法。</p></div> <ul><li>签名：<code>CollisionCheck(groupA: number, groupB: number)</code></li></ul> <h3 id="updatexy"><a href="#updatexy" class="header-anchor">#</a> UpdateXY</h3> <p>刷新对象的 dx, dy, lastx, lasty, rot（若navi=true）值。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>禁止在协程上调用该方法。</p></div> <ul><li>签名：<code>UpdateXY()</code></li></ul> <h3 id="afterframe"><a href="#afterframe" class="header-anchor">#</a> AfterFrame</h3> <p>刷新对象的 timer 和 ani_timer，若对象被标记为 del 或 kill 将删除对象并回收资源。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>禁止在协程上调用该方法。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>对象只有在AfterFrame调用后才会被清理，在此之前可以通过设置对象的 status 字段取消删除标记。</p></div> <ul><li>签名：<code>AfterFrame()</code></li></ul> <h3 id="new"><a href="#new" class="header-anchor">#</a> New</h3> <p>创建新对象。</p> <p>该方法使用 class 创建一个对象，并在构造对象后调用 class 的构造方法构造对象。</p> <p>被创建的对象具有如下属性：</p> <ul><li>x, y：坐标</li> <li>dx, dy：(只读)距离上一次更新的坐标增量</li> <li>rot：角度</li> <li>omiga：角度增量</li> <li>timer：计数器，每帧增加</li> <li>vx, vy：速度</li> <li>ax, ay：加速度</li> <li>layer：渲染层级</li> <li>group：碰撞组</li> <li>hide：是否隐藏</li> <li>bound：是否越界销毁</li> <li>navi：是否自动更新朝向</li> <li>colli：是否允许碰撞</li> <li>status：对象状态，返回&quot;del&quot;、&quot;kill&quot;、&quot;normal&quot;</li> <li>hscale, vscale：横向、纵向的缩放程度</li> <li>class：对象的父类</li> <li>a, b：碰撞盒大小</li> <li>rect：是否为矩形碰撞盒</li> <li>img：绑定的渲染对象，可以是精灵、动画序列、粒子效果</li> <li>ani：(只读)动画计数器</li></ul> <p>被创建对象的索引 1 和 2 被用于存放类和 <code>id</code></p> <p>其中父类class需满足如下形式：</p> <ul><li>is_class = true</li> <li>[1] = 初始化函数 (object, ...)</li> <li>[2] = 删除函数(DEL) (object, ...)</li> <li>[3] = 帧函数 (object)</li> <li>[4] = 渲染函数 (object)</li> <li>[5] = 碰撞函数 (object, object)</li> <li>[6] = 消亡函数(KILL) (object, ...)</li></ul> <p>上述回调函数将在对象触发相应事件时被调用</p> <ul><li>签名：<code>New(class: table)</code></li> <li>参数
<ul><li>class：对象所用的类</li></ul></li></ul> <h3 id="del"><a href="#del" class="header-anchor">#</a> Del</h3> <p>通知删除一个对象。将设置标志并调用回调函数。</p> <ul><li>签名：<code>Del(object: table, ...)</code></li> <li>参数
<ul><li>object：要删除的对象</li> <li>...：透传给回调方法的参数</li></ul></li></ul> <h3 id="kill"><a href="#kill" class="header-anchor">#</a> kill</h3> <p>通知杀死一个对象。将设置标志并调用回调函数。</p> <ul><li>签名：<code>Kill(object: table, ...)</code></li> <li>参数
<ul><li>object：要杀死的对象</li> <li>...：透传给回调方法的参数</li></ul></li></ul> <h3 id="isvalid"><a href="#isvalid" class="header-anchor">#</a> IsValid</h3> <p>检查对象是否有效。</p> <ul><li>签名：<code>IsValid(object: table): boolean</code></li> <li>返回值：对象是否有效</li></ul> <h3 id="getv"><a href="#getv" class="header-anchor">#</a> GetV</h3> <p>获取对象的速度，依次返回速度大小和速度方向。</p> <ul><li>签名：<code>GetV(object: table): [number, number]</code></li> <li>参数
<ul><li>object：要获取的对象</li></ul></li> <li>返回值：速度大小, 速度方向</li></ul> <h3 id="setv"><a href="#setv" class="header-anchor">#</a> SetV</h3> <p>设置对象的速度。</p> <ul><li>签名：<code>SetV(object: table, v: number, a: number, track?: boolean)</code></li> <li>参数
<ul><li>object：要设置的对象</li> <li>v：速度大小</li> <li>a：角度</li> <li>track：是否设置方向跟随，若设置为 true，则同时设置 rot，默认为 false</li></ul></li></ul> <h3 id="setimgstate"><a href="#setimgstate" class="header-anchor">#</a> SetImgState</h3> <p>设置对象绑定的资产的状态。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法会影响所有同名资源。</p></div> <ul><li>签名：<code>SetImgState(object: table, blend: string, a: number, r: number, g: number, b: number)</code></li> <li>参数
<ul><li>object：要设置的对象</li> <li>blend：混合模式，详见<a href="/guide/Subsystem/RenderSystem.html#混合选项">混合选项</a></li> <li>a：Alpha</li> <li>r：Red</li> <li>g：Green</li> <li>b：Blue</li></ul></li></ul> <h3 id="angle"><a href="#angle" class="header-anchor">#</a> Angle</h3> <p>若 a, b 为对象，则求向量 &lt; 对象b.中心 - 对象a.中心 &gt; 相对 X 轴正方向的夹角。</p> <p>否则，计算 atan2(y2 - b, x2 - a)。</p> <ul><li>签名：<code>Angle(a: table | number, b: table | number, x2?: number, y2?: number): number</code></li> <li>参数
<ul><li>a：要计算的对象或者横坐标 X</li> <li>b：要计算的对象或者纵坐标 Y</li> <li>x2：横坐标 X2</li> <li>y2：纵坐标 Y2</li></ul></li></ul> <h3 id="dist"><a href="#dist" class="header-anchor">#</a> Dist</h3> <p>求距离，若 a, b 为对象，则计算 a 与 b 之间的距离。</p> <p>否则，计算向量 &lt; c, d &gt; 与 &lt; a, b &gt; 之间的距离，</p> <ul><li>签名：<code>Dist(a: table | number, b: table | number, c?: number, d?: number): number</code></li> <li>参数
<ul><li>a：对象 A 或者坐标值</li> <li>b：对象 B 或者坐标值</li> <li>c：坐标值</li> <li>d：坐标值</li></ul></li></ul> <h3 id="boxcheck"><a href="#boxcheck" class="header-anchor">#</a> BoxCheck</h3> <p>检查对象中心是否在所给范围内。</p> <ul><li>签名：<code>BoxCheck(object: table, left: number, right: number, top: number, bottom: number): boolean</code></li> <li>参数
<ul><li>object：被检测的对象</li> <li>left：范围左侧的横坐标</li> <li>right：范围右侧的横坐标</li> <li>top：范围顶边的纵坐标</li> <li>bottom：范围底边的纵坐标</li></ul></li></ul> <h3 id="resetpool"><a href="#resetpool" class="header-anchor">#</a> ResetPool</h3> <p>清空并回收所有对象。</p> <ul><li>签名：<code>ResetPool()</code></li></ul> <h3 id="defaultrenderfunc"><a href="#defaultrenderfunc" class="header-anchor">#</a> DefaultRenderFunc</h3> <p>在对象上调用默认渲染方法。</p> <ul><li>签名：<code>DefaultRenderFunc(object: table)</code></li> <li>参数
<ul><li>object：对象</li></ul></li></ul> <h3 id="nextobject"><a href="#nextobject" class="header-anchor">#</a> NextObject</h3> <p>获取碰撞组中的下一个元素。</p> <p>若 groupId 为无效的碰撞组则返回所有对象。</p> <p>返回的第一个参数为 id，第二个参数为对象。</p> <ul><li>签名：<code>NextObject(groupId: number, id: number): [number, table]</code></li> <li>参数
<ul><li>groupId：组 ID</li> <li>id：对象 ID</li></ul></li> <li>返回值：id, object</li></ul> <h3 id="objlist"><a href="#objlist" class="header-anchor">#</a> ObjList</h3> <p>产生组遍历迭代器。</p> <ul><li>签名：<code>ObjList(groupId: number): [NextObject, number, number]</code></li> <li>参数
<ul><li>groupId：组 ID</li></ul></li> <li>返回值：NextObject 方法, groupId, id</li></ul> <h3 id="particlefire"><a href="#particlefire" class="header-anchor">#</a> ParticleFire</h3> <p>启动绑定在对象上的粒子发射器。</p> <ul><li>签名：<code>ParticleFire(object: table)</code></li> <li>参数
<ul><li>object：对象</li></ul></li></ul> <h3 id="particlestop"><a href="#particlestop" class="header-anchor">#</a> ParticleStop</h3> <p>停止绑定在对象上的粒子发射器。</p> <ul><li>签名：<code>ParticleStop(object: table)</code></li> <li>参数
<ul><li>object：对象</li></ul></li></ul> <h3 id="particlegetn"><a href="#particlegetn" class="header-anchor">#</a> ParticleGetn</h3> <p>返回绑定在对象上的粒子发射器的存活粒子数。</p> <ul><li>签名：<code>ParticleGetn(object: table)</code></li> <li>参数
<ul><li>object：对象</li></ul></li></ul> <h3 id="particlegetemission"><a href="#particlegetemission" class="header-anchor">#</a> ParticleGetEmission</h3> <p>获取绑定在对象上粒子发射器的发射密度。（个/秒）</p> <ul><li>签名：<code>ParticleGetEmission(object: table)</code></li> <li>参数
<ul><li>object：对象</li></ul></li></ul> <h3 id="particlesetemission"><a href="#particlesetemission" class="header-anchor">#</a> ParticleSetEmission</h3> <p>设置绑定在对象上粒子发射器的发射密度。（个/秒）</p> <ul><li>签名：<code>ParticleSetEmission(object: table, count: number)</code></li> <li>参数
<ul><li>object：对象</li> <li>count：密度</li></ul></li></ul> <h2 id="杂项"><a href="#杂项" class="header-anchor">#</a> 杂项</h2> <h3 id="registry"><a href="#registry" class="header-anchor">#</a> Registry <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>返回注册表。</p> <p>LuaSTGPlus 不支持该方法。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="snapshot"><a href="#snapshot" class="header-anchor">#</a> Snapshot</h3> <p>记录截图并保存为 PNG 格式。</p> <p>该方法会异步的完成。</p> <ul><li>签名：<code>Snapshot(path: string)</code></li> <li>参数
<ul><li>path：保存路径，以<code>/storage</code>为根路径</li></ul></li></ul> <h3 id="execute"><a href="#execute" class="header-anchor">#</a> Execute <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>deprecated</span></h3> <p>执行外部程序。</p> <ul><li>签名：<code>Execute(path: string, arguments?: string, directory?: string, wait?: boolean): boolean</code></li> <li>参数
<ul><li>path：程序路径</li> <li>arguments：参数</li> <li>directory：工作目录</li> <li>wait：是否等待，默认<code>true</code></li></ul></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>该方法已废弃，不再有任何效果。</p></div> <h3 id="rand"><a href="#rand" class="header-anchor">#</a> Rand</h3> <p>构造一个随机数生成器。</p> <p>以当前系统时间作为种子。</p> <ul><li>签名：<code>Rand(): LSTGRandomizer</code></li> <li>返回值：随机数发生器</li></ul> <h3 id="color"><a href="#color" class="header-anchor">#</a> Color</h3> <p>构造一个颜色。</p> <ul><li>签名：<code>Color(a: number, r?: number, g?: number, b?: number): LSTGColor</code></li> <li>参数
<ul><li>a：当指定四个参数时，表示 alpha。否则将解释为 ARGB 颜色值</li> <li>r：Red 通道值，取 0-255</li> <li>g：Green 通道值，取 0-255</li> <li>b：Blue 通道值，取 0-255</li></ul></li> <li>返回值：颜色对象</li></ul> <h3 id="bentlaserdata"><a href="#bentlaserdata" class="header-anchor">#</a> BentLaserData</h3> <p>构造一个曲线激光控制器。</p> <ul><li>签名：<code>BentLaserData(): LSTGBentLaserData</code></li> <li>返回值：曲线激光对象</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/LegacyAPI/BuiltinTypes.html" class="prev">
        内建类型
      </a></span> <span class="next"><a href="/api/LegacyAPI/BuiltinConsts.html">
        内建常量
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.539388da.js" defer></script><script src="/assets/js/2.a73f2547.js" defer></script><script src="/assets/js/15.99687b20.js" defer></script><script src="/assets/js/3.54f0b22c.js" defer></script>
  </body>
</html>
